

>>HEAD>> ThreadSanitizer-x86_64 :: deadlock_detector_stress_test.cpp <<HEAD<<

Starting Test1
Expecting lock inversion: 0x7b1000000000 0x7b1000000040 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf16be)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:157:5 (deadlock_detector_stress_test.cpp.tmp+0xef593)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeeda5)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf171e)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:158:5 (deadlock_detector_stress_test.cpp.tmp+0xef5a1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeeda5)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test2
Expecting lock inversion: 0x7b1000000100 0x7b10000000c0 0x7b1000000080 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000000100) => M1 (0x7b10000000c0) => M2 (0x7b1000000080) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:183:5 (deadlock_detector_stress_test.cpp.tmp+0xef7d2)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:184:5 (deadlock_detector_stress_test.cpp.tmp+0xef7ea)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:185:5 (deadlock_detector_stress_test.cpp.tmp+0xef801)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf16be)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:199:5 (deadlock_detector_stress_test.cpp.tmp+0xef8d1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedf9)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf171e)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:203:5 (deadlock_detector_stress_test.cpp.tmp+0xef913)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedf9)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test4
Starting Test5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in thread T1:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_0_1<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf228e)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf23ed)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in thread T2:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_1_0<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf2317)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf23ed)

  Thread T1 (tid=189142, running) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x29613)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf218e)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb8e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee4d)

  Thread T2 (tid=189143, running) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x29613)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf218e)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb8e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee4d)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test6: 3 threads lock/unlock private mutexes
Starting Test7
No cycle: 0=>1
No cycle: 2=>3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b10000017c0) => M1 (0x7b1000001780) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:265:11 (deadlock_detector_stress_test.cpp.tmp+0xeff79)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:266:11 (deadlock_detector_stress_test.cpp.tmp+0xeffc5)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Have cycle: 4=>5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000001700) => M1 (0x7b1000001740) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:271:11 (deadlock_detector_stress_test.cpp.tmp+0xf003b)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:272:11 (deadlock_detector_stress_test.cpp.tmp+0xf0087)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Have cycle: 6=>7
Starting Test10: 4 threads lock/unlock 4 private mutexes, one under another
Starting Test11: 4 threads lock/unlock 4 private mutexes, all under another private mutex
Starting Test14: create lots of locks in 4 threads
Starting Test16: detailed output test with two locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007a80) => M1 (0x7b1000007ac0) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf326a)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf3167)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:450:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f21)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef054)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3219)
    #4 LockTest::Acquire_1_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:480:67 (deadlock_detector_stress_test.cpp.tmp+0xf31c7)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:452:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f54)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef054)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test17: detailed output test with three locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007b80) => M1 (0x7b1000007b40) => M2 (0x7b1000007b00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf326a)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf3167)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:469:5 (deadlock_detector_stress_test.cpp.tmp+0xf1051)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:477:47 (deadlock_detector_stress_test.cpp.tmp+0xf337a)
    #4 LockTest::Acquire_1_then_2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:482:67 (deadlock_detector_stress_test.cpp.tmp+0xf32c7)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:471:5 (deadlock_detector_stress_test.cpp.tmp+0xf1084)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3219)
    #4 LockTest::Acquire_2_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:483:67 (deadlock_detector_stress_test.cpp.tmp+0xf3327)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:473:5 (deadlock_detector_stress_test.cpp.tmp+0xf10b8)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test18: create, lock and destroy 4 locks; all in 4 threads in a loop
Starting Test19: lots of lock inversions
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007a80) => M1 (0x7b1000007ac0) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007ac0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007b00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007b40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007b80) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007bc0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007c00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007c40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007c80) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007cc0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007a40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007a00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b10000079c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007980) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007940) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007900) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b10000078c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007880) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007840) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007800) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b10000077c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007780) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007740) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007700) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b10000076c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007680) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007640) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007600) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b10000075c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007580) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007540) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007500) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b10000074c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007480) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007440) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007400) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b10000073c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007380) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007340) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007300) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b10000072c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007280) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007240) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=188966)
  Cycle in lock order graph: M0 (0x7b1000007200) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
ALL-DONE
ThreadSanitizer: reported 52 warnings
Starting Test1
Expecting lock inversion: 0x7b1000000000 0x7b1000000040 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf16be)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:157:5 (deadlock_detector_stress_test.cpp.tmp+0xef593)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeeda5)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:38 (deadlock_detector_stress_test.cpp.tmp+0xf1885)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf16be)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:157:5 (deadlock_detector_stress_test.cpp.tmp+0xef593)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeeda5)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf171e)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:158:5 (deadlock_detector_stress_test.cpp.tmp+0xef5a1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeeda5)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:38 (deadlock_detector_stress_test.cpp.tmp+0xf1885)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf171e)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:158:5 (deadlock_detector_stress_test.cpp.tmp+0xef5a1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeeda5)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test2
Expecting lock inversion: 0x7b1000000100 0x7b10000000c0 0x7b1000000080 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000000100) => M1 (0x7b10000000c0) => M2 (0x7b1000000080) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:183:5 (deadlock_detector_stress_test.cpp.tmp+0xef7d2)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:38 (deadlock_detector_stress_test.cpp.tmp+0xf1885)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:183:5 (deadlock_detector_stress_test.cpp.tmp+0xef7d2)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:184:5 (deadlock_detector_stress_test.cpp.tmp+0xef7ea)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:38 (deadlock_detector_stress_test.cpp.tmp+0xf1885)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:184:5 (deadlock_detector_stress_test.cpp.tmp+0xef7ea)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:185:5 (deadlock_detector_stress_test.cpp.tmp+0xef801)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

  Mutex M2 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:38 (deadlock_detector_stress_test.cpp.tmp+0xf1885)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:185:5 (deadlock_detector_stress_test.cpp.tmp+0xef801)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf16be)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:199:5 (deadlock_detector_stress_test.cpp.tmp+0xef8d1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedf9)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:38 (deadlock_detector_stress_test.cpp.tmp+0xf1885)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf16be)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:199:5 (deadlock_detector_stress_test.cpp.tmp+0xef8d1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedf9)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf171e)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:203:5 (deadlock_detector_stress_test.cpp.tmp+0xef913)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedf9)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:38 (deadlock_detector_stress_test.cpp.tmp+0xf1885)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf171e)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:203:5 (deadlock_detector_stress_test.cpp.tmp+0xef913)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedf9)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test4
Starting Test5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in thread T1:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_0_1<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf228e)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf23ed)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:38 (deadlock_detector_stress_test.cpp.tmp+0xf1885)
    #4 void LockTest::Lock_0_1<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf228e)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf23ed)

  Mutex M0 acquired here while holding mutex M1 in thread T2:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf1897)
    #4 void LockTest::Lock_1_0<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf2317)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf23ed)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:38 (deadlock_detector_stress_test.cpp.tmp+0xf1885)
    #4 void LockTest::Lock_1_0<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf2317)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf23ed)

  Thread T1 (tid=191209, running) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x29613)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf218e)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb8e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee4d)

  Thread T2 (tid=191215, running) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x29613)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf218e)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb8e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee4d)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test6: 3 threads lock/unlock private mutexes
Starting Test7
No cycle: 0=>1
No cycle: 2=>3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b10000017c0) => M1 (0x7b1000001780) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:265:11 (deadlock_detector_stress_test.cpp.tmp+0xeff79)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_trylock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1380:3 (deadlock_detector_stress_test.cpp.tmp+0x5b529)
    #1 PthreadMutex::try_lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:43:33 (deadlock_detector_stress_test.cpp.tmp+0xf2715)
    #2 LockTest::T(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:146:23 (deadlock_detector_stress_test.cpp.tmp+0xf26d0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:265:5 (deadlock_detector_stress_test.cpp.tmp+0xeff66)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:266:11 (deadlock_detector_stress_test.cpp.tmp+0xeffc5)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:266:5 (deadlock_detector_stress_test.cpp.tmp+0xeffb2)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Have cycle: 4=>5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000001700) => M1 (0x7b1000001740) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:271:11 (deadlock_detector_stress_test.cpp.tmp+0xf003b)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:271:5 (deadlock_detector_stress_test.cpp.tmp+0xf0028)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:272:11 (deadlock_detector_stress_test.cpp.tmp+0xf0087)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_trylock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1380:3 (deadlock_detector_stress_test.cpp.tmp+0x5b529)
    #1 PthreadMutex::try_lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:43:33 (deadlock_detector_stress_test.cpp.tmp+0xf2715)
    #2 LockTest::T(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:146:23 (deadlock_detector_stress_test.cpp.tmp+0xf26d0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:272:5 (deadlock_detector_stress_test.cpp.tmp+0xf0074)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Have cycle: 6=>7
Starting Test10: 4 threads lock/unlock 4 private mutexes, one under another
Starting Test11: 4 threads lock/unlock 4 private mutexes, all under another private mutex
Starting Test14: create lots of locks in 4 threads
Starting Test16: detailed output test with two locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007a80) => M1 (0x7b1000007ac0) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf326a)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf3167)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:450:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f21)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef054)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3219)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:55 (deadlock_detector_stress_test.cpp.tmp+0xf3159)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:450:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f21)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef054)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3219)
    #4 LockTest::Acquire_1_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:480:67 (deadlock_detector_stress_test.cpp.tmp+0xf31c7)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:452:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f54)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef054)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf326a)
    #4 LockTest::Acquire_1_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:480:55 (deadlock_detector_stress_test.cpp.tmp+0xf31b9)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:452:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f54)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef054)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test17: detailed output test with three locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007b80) => M1 (0x7b1000007b40) => M2 (0x7b1000007b00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf326a)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf3167)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:469:5 (deadlock_detector_stress_test.cpp.tmp+0xf1051)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3219)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:55 (deadlock_detector_stress_test.cpp.tmp+0xf3159)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:469:5 (deadlock_detector_stress_test.cpp.tmp+0xf1051)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:477:47 (deadlock_detector_stress_test.cpp.tmp+0xf337a)
    #4 LockTest::Acquire_1_then_2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:482:67 (deadlock_detector_stress_test.cpp.tmp+0xf32c7)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:471:5 (deadlock_detector_stress_test.cpp.tmp+0xf1084)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf326a)
    #4 LockTest::Acquire_1_then_2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:482:55 (deadlock_detector_stress_test.cpp.tmp+0xf32b9)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:471:5 (deadlock_detector_stress_test.cpp.tmp+0xf1084)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3219)
    #4 LockTest::Acquire_2_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:483:67 (deadlock_detector_stress_test.cpp.tmp+0xf3327)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:473:5 (deadlock_detector_stress_test.cpp.tmp+0xf10b8)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

  Mutex M2 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Acquire2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:477:47 (deadlock_detector_stress_test.cpp.tmp+0xf337a)
    #4 LockTest::Acquire_2_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:483:55 (deadlock_detector_stress_test.cpp.tmp+0xf3319)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:473:5 (deadlock_detector_stress_test.cpp.tmp+0xf10b8)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test18: create, lock and destroy 4 locks; all in 4 threads in a loop
Starting Test19: lots of lock inversions
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007a80) => M1 (0x7b1000007ac0) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007ac0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007b00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007b40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007b80) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007bc0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007c00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007c40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007c80) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007cc0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007a40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007a00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b10000079c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007980) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007940) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007900) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b10000078c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007880) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007840) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007800) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b10000077c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007780) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007740) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007700) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b10000076c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007680) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007640) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007600) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b10000075c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007580) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007540) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007500) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b10000074c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007480) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007440) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007400) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b10000073c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007380) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007340) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007300) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b10000072c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007280) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

  Mutex M0 previously acquired by the same thread here:
    #0 <null> <null> (0x000000000042)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007240) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

  Mutex M0 previously acquired by the same thread here:
    #0 <null> <null> (0x000000000042)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=190913)
  Cycle in lock order graph: M0 (0x7b1000007200) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

  Mutex M0 previously acquired by the same thread here:
    #0 <null> <null> (0x000000000042)

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

  Mutex M1 previously acquired by the same thread here:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1a85)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf1990)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
ALL-DONE
ThreadSanitizer: reported 52 warnings
Starting Test1
Expecting lock inversion: 0x7b1000000000 0x7b1000000040 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf168e)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:157:5 (deadlock_detector_stress_test.cpp.tmp+0xef573)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeed85)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf16ee)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:158:5 (deadlock_detector_stress_test.cpp.tmp+0xef581)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeed85)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
Starting Test2
Expecting lock inversion: 0x7b1000000100 0x7b10000000c0 0x7b1000000080 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000000100) => M1 (0x7b10000000c0) => M2 (0x7b1000000080) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:183:5 (deadlock_detector_stress_test.cpp.tmp+0xef7b2)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedaf)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:184:5 (deadlock_detector_stress_test.cpp.tmp+0xef7ca)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedaf)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:185:5 (deadlock_detector_stress_test.cpp.tmp+0xef7e1)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedaf)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
Starting Test3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf168e)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:199:5 (deadlock_detector_stress_test.cpp.tmp+0xef8b1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedd9)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf16ee)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:203:5 (deadlock_detector_stress_test.cpp.tmp+0xef8f3)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedd9)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
Starting Test4
Starting Test5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in thread T1:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_0_1<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf21de)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf233d)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in thread T2:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_1_0<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf2267)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf233d)

  Thread T1 (tid=213602, finished) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x295f3)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf20de)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb6e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee2d)

  Thread T2 (tid=213603, running) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x295f3)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf20de)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb6e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee2d)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
Starting Test6: 3 threads lock/unlock private mutexes
Starting Test7
No cycle: 0=>1
No cycle: 2=>3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b10000017c0) => M1 (0x7b1000001780) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:265:11 (deadlock_detector_stress_test.cpp.tmp+0xeff59)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeee84)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:266:11 (deadlock_detector_stress_test.cpp.tmp+0xeffa5)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeee84)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
Have cycle: 4=>5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000001700) => M1 (0x7b1000001740) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:271:11 (deadlock_detector_stress_test.cpp.tmp+0xf001b)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeee84)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:272:11 (deadlock_detector_stress_test.cpp.tmp+0xf0067)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeee84)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
Have cycle: 6=>7
Starting Test10: 4 threads lock/unlock 4 private mutexes, one under another
Starting Test11: 4 threads lock/unlock 4 private mutexes, all under another private mutex
Starting Test14: create lots of locks in 4 threads
Starting Test16: detailed output test with two locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007a80) => M1 (0x7b1000007ac0) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf31ba)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf30b7)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:450:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f01)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef034)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3169)
    #4 LockTest::Acquire_1_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:480:67 (deadlock_detector_stress_test.cpp.tmp+0xf3117)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:452:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f34)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef034)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
Starting Test17: detailed output test with three locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007b80) => M1 (0x7b1000007b40) => M2 (0x7b1000007b00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf31ba)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf30b7)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:469:5 (deadlock_detector_stress_test.cpp.tmp+0xf1031)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef064)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:477:47 (deadlock_detector_stress_test.cpp.tmp+0xf32ca)
    #4 LockTest::Acquire_1_then_2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:482:67 (deadlock_detector_stress_test.cpp.tmp+0xf3217)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:471:5 (deadlock_detector_stress_test.cpp.tmp+0xf1064)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef064)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3169)
    #4 LockTest::Acquire_2_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:483:67 (deadlock_detector_stress_test.cpp.tmp+0xf3277)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:473:5 (deadlock_detector_stress_test.cpp.tmp+0xf1098)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef064)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
Starting Test18: create, lock and destroy 4 locks; all in 4 threads in a loop
Starting Test19: lots of lock inversions
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007a80) => M1 (0x7b1000007ac0) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007ac0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007b00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007b40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007b80) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007bc0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007c00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007c40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007c80) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007cc0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007a40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007a00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b10000079c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007980) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007940) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007900) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b10000078c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007880) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007840) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007800) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b10000077c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007780) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007740) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007700) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b10000076c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007680) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007640) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007600) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b10000075c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007580) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007540) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007500) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b10000074c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007480) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007440) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007400) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b10000073c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007380) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007340) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007300) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b10000072c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 in PthreadSpinLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007280) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007240) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=213289)
  Cycle in lock order graph: M0 (0x7b1000007200) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_spin_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1457:3 (deadlock_detector_stress_test.cpp.tmp+0x51702)
    #1 PthreadSpinLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:69:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
ALL-DONE
ThreadSanitizer: reported 52 warnings
Starting Test1
Expecting lock inversion: 0x7b4000000000 0x7b4000000100 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000000000) => M1 (0x7b4000000100) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf168e)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:157:5 (deadlock_detector_stress_test.cpp.tmp+0xef573)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeed85)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf16ee)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:158:5 (deadlock_detector_stress_test.cpp.tmp+0xef581)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeed85)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
Starting Test2
Expecting lock inversion: 0x7b4000000400 0x7b4000000300 0x7b4000000200 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000000400) => M1 (0x7b4000000300) => M2 (0x7b4000000200) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:183:5 (deadlock_detector_stress_test.cpp.tmp+0xef7b2)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedaf)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:184:5 (deadlock_detector_stress_test.cpp.tmp+0xef7ca)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedaf)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:185:5 (deadlock_detector_stress_test.cpp.tmp+0xef7e1)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedaf)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
Starting Test3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000000000) => M1 (0x7b4000000100) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf168e)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:199:5 (deadlock_detector_stress_test.cpp.tmp+0xef8b1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedd9)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf16ee)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:203:5 (deadlock_detector_stress_test.cpp.tmp+0xef8f3)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedd9)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
Starting Test4
Starting Test5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000000000) => M1 (0x7b4000000100) => M0

  Mutex M1 acquired here while holding mutex M0 in thread T1:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_0_1<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf21ee)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf234d)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in thread T2:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf17e7)
    #4 void LockTest::Lock_1_0<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf2277)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf234d)

  Thread T1 (tid=216134, finished) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x295f3)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf20ee)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb6e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee2d)

  Thread T2 (tid=216137, running) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x295f3)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf20ee)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb6e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee2d)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
Starting Test6: 3 threads lock/unlock private mutexes
Starting Test7
No cycle: 0=>1
No cycle: 2=>3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005f00) => M1 (0x7b4000005e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:265:11 (deadlock_detector_stress_test.cpp.tmp+0xeff59)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeee84)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:266:11 (deadlock_detector_stress_test.cpp.tmp+0xeffa5)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeee84)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
Have cycle: 4=>5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005c00) => M1 (0x7b4000005d00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:271:11 (deadlock_detector_stress_test.cpp.tmp+0xf001b)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeee84)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:272:11 (deadlock_detector_stress_test.cpp.tmp+0xf0067)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeee84)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
Have cycle: 6=>7
Starting Test8
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005a00) => M1 (0x7b4000005b00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test8() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:284:12 (deadlock_detector_stress_test.cpp.tmp+0xf01aa)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:611:14 (deadlock_detector_stress_test.cpp.tmp+0xeeeb4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_rdlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1502:3 (deadlock_detector_stress_test.cpp.tmp+0x4c542)
    #1 PthreadRWLock::rdlock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:96:19 (deadlock_detector_stress_test.cpp.tmp+0xf2855)
    #2 LockTest::RL(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:131:16 (deadlock_detector_stress_test.cpp.tmp+0xf2760)
    #3 LockTest::Test8() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:285:11 (deadlock_detector_stress_test.cpp.tmp+0xf01f4)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:611:14 (deadlock_detector_stress_test.cpp.tmp+0xeeeb4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
Have cycle: 0=>1
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005c00) => M1 (0x7b4000005d00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_rdlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1502:3 (deadlock_detector_stress_test.cpp.tmp+0x4c542)
    #1 PthreadRWLock::rdlock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:96:19 (deadlock_detector_stress_test.cpp.tmp+0xf2855)
    #2 LockTest::RL(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:131:16 (deadlock_detector_stress_test.cpp.tmp+0xf2760)
    #3 LockTest::Test8() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:290:12 (deadlock_detector_stress_test.cpp.tmp+0xf0269)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:611:14 (deadlock_detector_stress_test.cpp.tmp+0xeeeb4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_rdlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1502:3 (deadlock_detector_stress_test.cpp.tmp+0x4c542)
    #1 PthreadRWLock::rdlock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:96:19 (deadlock_detector_stress_test.cpp.tmp+0xf2855)
    #2 LockTest::RL(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:131:16 (deadlock_detector_stress_test.cpp.tmp+0xf2760)
    #3 LockTest::Test8() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:291:12 (deadlock_detector_stress_test.cpp.tmp+0xf02b5)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:611:14 (deadlock_detector_stress_test.cpp.tmp+0xeeeb4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:96:19 in PthreadRWLock::rdlock()
==================
Have cycle: 2=>3
Starting Test10: 4 threads lock/unlock 4 private mutexes, one under another
Starting Test11: 4 threads lock/unlock 4 private mutexes, all under another private mutex
Starting Test12: 4 threads read lock/unlock 4 shared mutexes, one under another
Starting Test13: 4 threads read lock/unlock 4 shared mutexes, all under another shared mutex
Starting Test14: create lots of locks in 4 threads
Starting Test15: recursive rlock
Starting Test16: detailed output test with two locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006e00) => M1 (0x7b4000006d00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf322a)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf3127)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:450:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f01)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef034)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf31d9)
    #4 LockTest::Acquire_1_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:480:67 (deadlock_detector_stress_test.cpp.tmp+0xf3187)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:452:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f34)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef034)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
Starting Test17: detailed output test with three locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006a00) => M1 (0x7b4000006b00) => M2 (0x7b4000006c00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf322a)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf3127)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:469:5 (deadlock_detector_stress_test.cpp.tmp+0xf1031)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef064)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:477:47 (deadlock_detector_stress_test.cpp.tmp+0xf333a)
    #4 LockTest::Acquire_1_then_2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:482:67 (deadlock_detector_stress_test.cpp.tmp+0xf3287)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:471:5 (deadlock_detector_stress_test.cpp.tmp+0xf1064)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef064)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf31d9)
    #4 LockTest::Acquire_2_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:483:67 (deadlock_detector_stress_test.cpp.tmp+0xf32e7)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:473:5 (deadlock_detector_stress_test.cpp.tmp+0xf1098)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef064)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
Starting Test18: create, lock and destroy 4 locks; all in 4 threads in a loop
Starting Test19: lots of lock inversions
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006e00) => M1 (0x7b4000006d00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006d00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006c00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006b00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006a00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006f00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000007000) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000007100) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000007200) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000007300) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006900) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006800) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006700) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006600) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006500) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006400) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005e00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005d00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005c00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005b00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005a00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005f00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006000) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006100) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006200) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000006300) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005900) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005800) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005700) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005600) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005500) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005400) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005300) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005200) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005100) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000005000) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000004f00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000004e00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000004d00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000004c00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000004b00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 in PthreadRWLock::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000004a00) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000004900) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=215902)
  Cycle in lock order graph: M0 (0x7b4000004800) => M1 (0x7b4000006e00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_rwlock_wrlock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1532:3 (deadlock_detector_stress_test.cpp.tmp+0x51fc2)
    #1 PthreadRWLock::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:93:17 (deadlock_detector_stress_test.cpp.tmp+0xf19d5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf18e0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf135d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0c4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
ALL-DONE
ThreadSanitizer: reported 54 warnings
Starting Test1
Expecting lock inversion: 0x7b1000000000 0x7b1000000040 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf18c7)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf16ae)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:157:5 (deadlock_detector_stress_test.cpp.tmp+0xef593)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeeda5)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf18c7)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf170e)
    #5 LockTest::Test1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:158:5 (deadlock_detector_stress_test.cpp.tmp+0xef5a1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:604:14 (deadlock_detector_stress_test.cpp.tmp+0xeeda5)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test2
Expecting lock inversion: 0x7b1000000100 0x7b10000000c0 0x7b1000000080 
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000000100) => M1 (0x7b10000000c0) => M2 (0x7b1000000080) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf18c7)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:183:5 (deadlock_detector_stress_test.cpp.tmp+0xef7d2)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf18c7)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:184:5 (deadlock_detector_stress_test.cpp.tmp+0xef7ea)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf18c7)
    #4 LockTest::Test2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:185:5 (deadlock_detector_stress_test.cpp.tmp+0xef801)
    #5 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:605:14 (deadlock_detector_stress_test.cpp.tmp+0xeedcf)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf18c7)
    #4 void LockTest::Lock_0_1<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf16ae)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:199:5 (deadlock_detector_stress_test.cpp.tmp+0xef8d1)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedf9)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf18c7)
    #4 void LockTest::Lock_1_0<false>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf170e)
    #5 LockTest::Test3() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:203:5 (deadlock_detector_stress_test.cpp.tmp+0xef913)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:606:14 (deadlock_detector_stress_test.cpp.tmp+0xeedf9)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test4
Starting Test5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000000000) => M1 (0x7b1000000040) => M0

  Mutex M1 acquired here while holding mutex M0 in thread T1:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf18c7)
    #4 void LockTest::Lock_0_1<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:523:5 (deadlock_detector_stress_test.cpp.tmp+0xf22fe)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf245d)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in thread T2:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Lock2(unsigned long, unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:519:45 (deadlock_detector_stress_test.cpp.tmp+0xf18c7)
    #4 void LockTest::Lock_1_0<true>() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:532:5 (deadlock_detector_stress_test.cpp.tmp+0xf2387)
    #5 LockTest::Thread(void*) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:578:5 (deadlock_detector_stress_test.cpp.tmp+0xf245d)

  Thread T1 (tid=230020, running) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x29613)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf21fe)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb8e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee4d)

  Thread T2 (tid=230022, running) created by main thread at:
    #0 pthread_create /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1048:3 (deadlock_detector_stress_test.cpp.tmp+0x29613)
    #1 LockTest::RunThreads(void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)(), void (LockTest::*)()) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:588:7 (deadlock_detector_stress_test.cpp.tmp+0xf21fe)
    #2 LockTest::Test5() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:228:5 (deadlock_detector_stress_test.cpp.tmp+0xefb8e)
    #3 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:608:14 (deadlock_detector_stress_test.cpp.tmp+0xeee4d)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test6: 3 threads lock/unlock private mutexes
Starting Test7
No cycle: 0=>1
No cycle: 2=>3
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b10000017c0) => M1 (0x7b1000001780) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:265:11 (deadlock_detector_stress_test.cpp.tmp+0xeff79)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:266:11 (deadlock_detector_stress_test.cpp.tmp+0xeffc5)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Have cycle: 4=>5
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000001700) => M1 (0x7b1000001740) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:271:11 (deadlock_detector_stress_test.cpp.tmp+0xf003b)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test7() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:272:11 (deadlock_detector_stress_test.cpp.tmp+0xf0087)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:610:14 (deadlock_detector_stress_test.cpp.tmp+0xeeea4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Have cycle: 6=>7
Starting Test9
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000001680) => M1 (0x7b10000016c0) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test9() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:303:23 (deadlock_detector_stress_test.cpp.tmp+0xf043e)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:612:14 (deadlock_detector_stress_test.cpp.tmp+0xeef04)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test9() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:304:23 (deadlock_detector_stress_test.cpp.tmp+0xf04d2)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:612:14 (deadlock_detector_stress_test.cpp.tmp+0xeef04)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test10: 4 threads lock/unlock 4 private mutexes, one under another
Starting Test11: 4 threads lock/unlock 4 private mutexes, all under another private mutex
Starting Test14: create lots of locks in 4 threads
Starting Test16: detailed output test with two locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007a80) => M1 (0x7b1000007ac0) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf32da)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf31d7)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:450:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f21)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef054)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3289)
    #4 LockTest::Acquire_1_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:480:67 (deadlock_detector_stress_test.cpp.tmp+0xf3237)
    #5 LockTest::Test16() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:452:5 (deadlock_detector_stress_test.cpp.tmp+0xf0f54)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:619:14 (deadlock_detector_stress_test.cpp.tmp+0xef054)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test17: detailed output test with three locks
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007b80) => M1 (0x7b1000007b40) => M2 (0x7b1000007b00) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Acquire1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:478:47 (deadlock_detector_stress_test.cpp.tmp+0xf32da)
    #4 LockTest::Acquire_0_then_1() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:481:67 (deadlock_detector_stress_test.cpp.tmp+0xf31d7)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:469:5 (deadlock_detector_stress_test.cpp.tmp+0xf1051)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M2 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Acquire2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:477:47 (deadlock_detector_stress_test.cpp.tmp+0xf33ea)
    #4 LockTest::Acquire_1_then_2() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:482:67 (deadlock_detector_stress_test.cpp.tmp+0xf3337)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:471:5 (deadlock_detector_stress_test.cpp.tmp+0xf1084)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

  Mutex M0 acquired here while holding mutex M2 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Acquire0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:479:47 (deadlock_detector_stress_test.cpp.tmp+0xf3289)
    #4 LockTest::Acquire_2_then_0() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:483:67 (deadlock_detector_stress_test.cpp.tmp+0xf3397)
    #5 LockTest::Test17() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:473:5 (deadlock_detector_stress_test.cpp.tmp+0xf10b8)
    #6 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:620:14 (deadlock_detector_stress_test.cpp.tmp+0xef084)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
Starting Test18: create, lock and destroy 4 locks; all in 4 threads in a loop
Starting Test19: lots of lock inversions
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007a80) => M1 (0x7b1000007ac0) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007ac0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007b00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007b40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007b80) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007bc0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007c00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007c40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007c80) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007cc0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007a40) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007a00) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b10000079c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007980) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007940) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007900) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b10000078c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007880) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007840) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007800) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b10000077c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007780) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007740) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007700) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b10000076c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007680) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007640) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007600) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b10000075c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007580) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007540) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007500) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b10000074c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007480) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007440) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007400) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b10000073c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007380) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007340) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007300) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b10000072c0) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 in PthreadMutex::lock()
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007280) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007240) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=229912)
  Cycle in lock order graph: M0 (0x7b1000007200) => M1 (0x7b1000007a80) => M0

  Mutex M1 acquired here while holding mutex M0 in main thread:
    #0 <null> <null> (0x000000000042)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M0 acquired here while holding mutex M1 in main thread:
    #0 pthread_mutex_lock /home/llvm/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1367:3 (deadlock_detector_stress_test.cpp.tmp+0x29902)
    #1 PthreadMutex::lock() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:41:17 (deadlock_detector_stress_test.cpp.tmp+0xf1ab5)
    #2 LockTest::L(unsigned long) /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:121:16 (deadlock_detector_stress_test.cpp.tmp+0xf19c0)
    #3 LockTest::Test19() /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:512:9 (deadlock_detector_stress_test.cpp.tmp+0xf137d)
    #4 main /home/llvm/compiler-rt/test/tsan/deadlock_detector_stress_test.cpp:622:14 (deadlock_detector_stress_test.cpp.tmp+0xef0e4)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (<unknown module>) 
==================
ALL-DONE
ThreadSanitizer: reported 53 warnings



>>TAIL>> ThreadSanitizer-x86_64 :: deadlock_detector_stress_test.cpp <<TAIL<<
